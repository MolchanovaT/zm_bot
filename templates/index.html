<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω–∫–∞</title>
</head>
<body>
<h2>üìã –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
{% with messages = get_flashed_messages(with_categories=True) %}
{% if messages %}
    {% for category, message in messages %}
        <p style="color: {% if category == 'success' %}green{% else %}red{% endif %};">
            {{ message }}
        </p>
    {% endfor %}
{% endif %}
{% endwith %}

<h3>üìÇ –î–∏–ª–µ—Ä—ã</h3>
<table border="1">
    <tr>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–ò–ù–ù</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    {% for item in dilers %}
    <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.inn }}</td>
        <td>{% if item.allowed %}‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ{% else %}‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ{% endif %}</td>
        <td>
            <a href="{{ url_for('edit_record', table='Dilers', item_id=item.id) }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <a href="{{ url_for('delete_record', table='Dilers', item_id=item.id) }}">üóë –£–¥–∞–ª–∏—Ç—å</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>üìÇ –õ–ü–£</h3>
<table border="1">
    <tr>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–ò–ù–ù</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    {% for item in lpus %}
    <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.inn }}</td>
        <td>{% if item.allowed %}‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ{% else %}‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ{% endif %}</td>
        <td>
            <a href="{{ url_for('edit_record', table='LPU', item_id=item.id) }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <a href="{{ url_for('delete_record', table='LPU', item_id=item.id) }}">üóë –£–¥–∞–ª–∏—Ç—å</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>‚è≥ –ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</h3>
<table border="1">
    <tr>
        <th>–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç</th>
        <th>–ò–ù–ù</th>
        <th>–î–∞—Ç–∞</th>
        <th>–†–∞–∑—Ä–µ—à–µ–Ω–æ</th>
        <th>–ó–∞–ø—Ä–µ—â–µ–Ω–æ</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    {% for item in pending %}
    <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.inn }}</td>
        <td>{{ item.date.strftime("%d.%m.%Y") }}</td>
        <td>{% if item.approved %}‚úÖ{% else %}‚Äî{% endif %}</td>
        <td>{% if item.denied %}‚ùå{% else %}‚Äî{% endif %}</td>
        <td>
            <a href="{{ url_for('edit_record', table='PendingReview', item_id=item.id) }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <a href="{{ url_for('delete_record', table='PendingReview', item_id=item.id) }}">üóë –£–¥–∞–ª–∏—Ç—å</a>
        </td>
    </tr>
    {% endfor %}
</table>

<a href="{{ url_for('add_record') }}">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å</a>

<h3>üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å CSV</h3>
<form method="post" action="{{ url_for('upload_file') }}" enctype="multipart/form-data">
    <input type="file" name="file" required>
    <select name="table">
        <option value="Dilers">–î–∏–ª–µ—Ä—ã</option>
        <option value="LPU">–õ–ü–£</option>
        <option value="PendingReview">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</option>
    </select>
    <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</form>

</body>
</html>
